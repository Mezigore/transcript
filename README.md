# Система транскрипции и анализа эмоций

Инструмент для транскрипции аудио/видео файлов с распознаванием эмоций, диаризацией говорящих и дополнительной аналитикой.

## Быстрый запуск

### Основные команды

```bash
# Базовая обработка одного файла с анализом эмоций через wav2vec
python run.py --emotion-engine wav2vec

# Обработка с улучшенной постобработкой (создает JSON для LLM и человеко-читаемые форматы)
python run.py --emotion-engine wav2vec --post-process

# Обработка без временных меток в результатах постобработки
python run.py --emotion-engine wav2vec --post-process --no-timestamps

# Использование wavlm вместо wav2vec для анализа эмоций
python run.py --emotion-engine wavlm
```

## Описание команд

### Выбор движка анализа эмоций

- **wav2vec** - Более новый движок с трехмерной моделью эмоций (A/D/V):
  - A (Arousal) - возбуждение/активация (0-1)
  - D (Dominance) - доминантность/контроль (0-1)
  - V (Valence) - валентность/знак эмоции (0-1)
  
  Пример формата: `[A:0.51, D:0.54, V:0.65]`

- **wavlm** - Классический движок с категориальными эмоциями:
  - Определяет один доминирующий тип эмоции (энтузиазм, нейтральность и т.д.)
  - Указывает процент уверенности
  
  Пример формата: `[энтузиазм (98.5%)]`

### Параметры постобработки

При использовании `--post-process` создаются дополнительные форматы:

1. `transcript_human.txt` - удобный для чтения формат с эмодзи и указанием тренда эмоций
2. `transcript_llm.json` - JSON формат для анализа через LLM

Параметр `--no-timestamps` убирает временные метки из файлов постобработки, оставляя их только в основном транскрипте. Это делает вывод более компактным и удобным для чтения.

## Дополнительные команды

```bash
# Пропустить анализ эмоций (только транскрипция и диаризация)
python run.py --skip-emotions

# Запустить только постобработку существующих транскриптов
python process_all_transcripts.py

# Постобработка без временных меток
python process_all_transcripts.py --no-timestamps

# Обработка конкретного транскрипта
python process_transcript.py output/имя_файла_transcript.txt
```

## Результаты

После запуска команд результаты можно найти:

- Основные транскрипты: `output/*.txt`
- Файлы постобработки: `output/имя_файла_transcript/` (содержит файлы transcript_human.txt и transcript_llm.json)

## Требования

Для работы требуются библиотеки:
- whisper
- transformers
- torch
- numpy
- и другие зависимости в requirements.txt 